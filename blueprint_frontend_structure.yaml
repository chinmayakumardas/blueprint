// === Project: Blueprint - Production Ready Frontend Architecture (JavaScript) ===

// This document outlines a real-world modular, scalable structure for a complex app
// built with Next.js 14 (App Router), Tailwind, Redux Toolkit, ShadCN UI, Axios, GSAP.
// It includes: public/protected layout, error handling, loading, sanitization, debounce, modular slices, and reusable UI.

/**
 * ğŸ“ Folder Structure
 */

blueprint-frontend/
â”œâ”€â”€ app/                      // Next.js App Router
â”‚   â”œâ”€â”€ (auth)/               // Public routes
â”‚   â”‚   â”œâ”€â”€ login/page.js
â”‚   â”‚   â”œâ”€â”€ register/page.js
â”‚   â”‚   â””â”€â”€ layout.js         // Public Layout
â”‚   â”œâ”€â”€ (dashboard)/          // Protected, RBAC pages
â”‚   â”‚   â”œâ”€â”€ projects/page.js
â”‚   â”‚   â”œâ”€â”€ tasks/page.js
â”‚   â”‚   â”œâ”€â”€ bugs/page.js
â”‚   â”‚   â””â”€â”€ layout.js         // Protected Layout with role checks
â”‚   â”œâ”€â”€ not-found.js          // 404 override
â”‚   â”œâ”€â”€ layout.js             // Root layout
â”‚   â””â”€â”€ page.js               // Landing page
â”‚
â”œâ”€â”€ modules/                  // Feature Modules (fully isolated)
â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ slice.js
â”‚   â”‚   â”œâ”€â”€ services.js
â”‚   â”‚   â”œâ”€â”€ constants.js
â”‚   â”‚   â””â”€â”€ hooks.js
â”‚   â”œâ”€â”€ projects/
â”‚   â”‚   â”œâ”€â”€ components/       // ProjectCard, ProjectForm
â”‚   â”‚   â”œâ”€â”€ slice.js
â”‚   â”‚   â”œâ”€â”€ services.js
â”‚   â”‚   â”œâ”€â”€ hooks.js
â”‚   â”‚   â””â”€â”€ constants.js
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ components/               // Reusable global components
â”‚   â”œâ”€â”€ layout/               // Header, Sidebar, RoleLayout
â”‚   â”œâ”€â”€ loaders/              // PageLoader, Spinner
â”‚   â”œâ”€â”€ ui/                   // Input, Button, Modal, Toast
â”‚   â”œâ”€â”€ error/                // ErrorBoundary, NotFound, Fallbacks
â”‚   â””â”€â”€ forms/                // DynamicForm, FormRenderer
â”‚
â”œâ”€â”€ constants/                // Roles, Routes, Statuses, Themes
â”‚   â”œâ”€â”€ roles.js
â”‚   â”œâ”€â”€ routes.js
â”‚   â”œâ”€â”€ endpoints.js
â”‚   â””â”€â”€ messages.js
â”‚
â”œâ”€â”€ store/
â”‚   â”œâ”€â”€ index.js              // Redux store setup
â”‚   â””â”€â”€ rootReducer.js        // Combine slices
â”‚
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ axiosInstance.js      // Axios config + interceptors
â”‚   â”œâ”€â”€ rbac.js               // Role checker
â”‚   â”œâ”€â”€ sanitize.js           // Input cleaning
â”‚   â”œâ”€â”€ debounce.js           // Debounce util
â”‚   â””â”€â”€ validators.js         // Validation utilities
â”‚
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useRoleRedirect.js
â”‚   â”œâ”€â”€ useDebouncedValue.js
â”‚   â””â”€â”€ useGlobalError.js
â”‚
â”œâ”€â”€ middleware.js             // Protect RBAC pages
â”œâ”€â”€ styles/
â”‚   â””â”€â”€ animations.css        // GSAP/Fade styles
â”œâ”€â”€ public/
â”‚
â”œâ”€â”€ tailwind.config.js
â”œâ”€â”€ theme.config.ts          // ShadCN theming
â”œâ”€â”€ .env.local
â””â”€â”€ next.config.js


/**
 * âœ… Sample: app/(dashboard)/projects/page.js
 */
'use client'
import { useProjects } from '@/modules/projects/hooks'
import ProjectCard from '@/modules/projects/components/ProjectCard'
import PageLoader from '@/components/loaders/PageLoader'
import ErrorFallback from '@/components/error/ErrorFallback'

export default function ProjectsPage() {
  const { loading, error, projects } = useProjects()

  if (loading) return <PageLoader />
  if (error) return <ErrorFallback message={error.message} />

  return (
    <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
      {projects.map(project => (
        <ProjectCard key={project.id} data={project} />
      ))}
    </div>
  )
}


/**
 * ğŸ“¦ Sample: modules/projects/services.js
 */
import axios from '@/lib/axiosInstance'
import { sanitizeInput } from '@/lib/sanitize'

export const fetchProjects = async () => {
  const res = await axios.get('/projects')
  return res.data
}

export const createProject = async (payload) => {
  const clean = sanitizeInput(payload)
  return axios.post('/projects', clean)
}


/**
 * â™»ï¸ Sample: lib/sanitize.js
 */
export const sanitizeInput = (input) => {
  if (typeof input === 'string') {
    return input.replace(/<[^>]*>?/gm, '').trim()
  }
  if (typeof input === 'object') {
    return Object.entries(input).reduce((acc, [key, value]) => {
      acc[key] = sanitizeInput(value)
      return acc
    }, {})
  }
  return input
}


/**
 * â³ Sample: components/loaders/PageLoader.js
 */
export default function PageLoader() {
  return (
    <div className="flex h-full items-center justify-center">
      <span className="animate-spin text-xl">Loading...</span>
    </div>
  )
}


/**
 * âŒ Sample: components/error/ErrorFallback.js
 */
export default function ErrorFallback({ message }) {
  return (
    <div className="p-6 text-center bg-red-100 text-red-800">
      <p>ğŸš¨ Something went wrong:</p>
      <p>{message}</p>
    </div>
  )
}


/**
 * ğŸš¦ Sample: lib/debounce.js
 */
export const debounce = (func, delay) => {
  let timer
  return (...args) => {
    clearTimeout(timer)
    timer = setTimeout(() => {
      func(...args)
    }, delay)
  }
}


/**
 * ğŸš« app/not-found.js (404)
 */
export default function NotFound() {
  return <div className="text-center text-red-600 py-10 text-xl">404 | Page Not Found</div>
}
